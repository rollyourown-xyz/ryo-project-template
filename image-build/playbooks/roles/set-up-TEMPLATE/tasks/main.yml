---

# Copy iptables rules script (making executable)
#
- name: Copy firewall rules script
  copy:
    mode: 0770
    owner: root
    group: root
    dest: /usr/local/bin/iptables-rules.sh
    src: iptables-rules.sh
    force: yes


# Copy firewall service definition
#
- name: Copy firewall service definition
  copy:
    mode: 0644
    owner: root
    group: root
    dest: /lib/systemd/system/iptables-rules.service
    src: iptables-rules.service
    force: yes


# Enable iptables rules service
#
- name: Enable firewall service
  service:
    name: iptables-rules.service
    enabled: yes
    state: started


# Copy TEMPLATE-service consul service configuration file - modify TEMPLATE-service.hcl for this component's purpose
#
- name: Copy TEMPLATE-service consul service configuration file
  template:
    mode: 0640
    owner: consul
    group: consul
    dest: /etc/consul.d/TEMPLATE-service.hcl
    src: TEMPLATE-service.hcl.j2
    force: yes


## FURTHER ANSIBLE TASKS FOR SETTING UP THE COMPONENT
